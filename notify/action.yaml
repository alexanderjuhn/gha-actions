# notify.yml
name: 'Send a message to Discord'
description: 'Send message to Discord'
inputs:
#  webhook:  
#    description: 'Discord webhook. If not provided then it will look for the secret DISCORD_WEBHOOK'
#    required: false
#    default: ${{ secrets.DISCORD_WEBHOOK }}
  message:  
    description: 'Message to send'
    required: true
  sender:  
    description: 'Who sent the message'
    required: false
    default: "GHA Pipeline"
runs:
  using: "composite"
  steps:
    - name: Read value
      run: |
        WEBHOOK=${{ secrets.DISCORD_WEBHOOK }}
        curl -H "Content-Type: application/json" -d "{\"username\": \"${{ inputs.sender }}\", \"content\": \"${{ inputs.message }}\"}" $WEBHOOK
      shell: bash

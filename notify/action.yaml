# notify.yml
name: 'Send a message to Discord'
description: 'Send message to Discord'
inputs:
  webhook:  
    description: 'Discord webhook. If not provided then it will look for the secret DISCORD_WEBHOOK'
    required: true
  message:  
    description: 'Message to send'
    required: true
  sender:  
    description: 'Who sent the message'
    required: false
    default: "GHA Pipeline"
runs:
  using: "composite"
  steps:
    - name: Read value
      run: |
        WEBHOOK=::add-mask::$(echo -n ::add-mask::${{ inputs.message }})
        echo "::add-mask::$WEBHOOK"
        curl -s -H "Content-Type: application/json" -d "{\"username\": \"${{ inputs.sender }}\", \"content\": \"${{ inputs.message }}\"}" $WEBHOOK
      shell: bash
